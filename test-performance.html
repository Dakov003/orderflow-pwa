<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Performance - OrderFlow PWA</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .content {
            padding: 30px;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        .test-card:hover {
            border-color: #0ea5e9;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .test-button {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);
        }
        .test-button:disabled {
            background: #94a3b8;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .results {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .app-frame {
            width: 100%;
            height: 600px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            margin-top: 20px;
        }
        .performance-chart {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        .metric:last-child {
            border-bottom: none;
        }
        .metric-value {
            font-weight: bold;
            color: #0ea5e9;
        }
        .metric-good {
            color: #10b981;
        }
        .metric-warning {
            color: #f59e0b;
        }
        .metric-bad {
            color: #ef4444;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚡ Test Performance - OrderFlow PWA</h1>
            <p>Testează performanța și optimizările aplicației</p>
        </div>

        <div class="content">
            <div class="test-grid">
                <div class="test-card">
                    <h3>⏱️ Timpuri de Încărcare</h3>
                    <p>Testează timpii de încărcare și răspuns</p>
                    <button class="test-button" onclick="testLoadTimes()">Testează Timpuri</button>
                    <button class="test-button" onclick="testNetworkPerformance()">Testează Rețea</button>
                    <div class="results" id="loadResults"></div>
                </div>

                <div class="test-card">
                    <h3>💾 Utilizare Memorie</h3>
                    <p>Testează utilizarea memoriei și CPU</p>
                    <button class="test-button" onclick="testMemoryUsage()">Testează Memorie</button>
                    <button class="test-button" onclick="testCPUUsage()">Testează CPU</button>
                    <div class="results" id="memoryResults"></div>
                </div>

                <div class="test-card">
                    <h3>📦 Dimensiuni Bundle</h3>
                    <p>Testează dimensiunile fișierelor</p>
                    <button class="test-button" onclick="testBundleSizes()">Testează Bundle</button>
                    <button class="test-button" onclick="testAssetOptimization()">Testează Assets</button>
                    <div class="results" id="bundleResults"></div>
                </div>

                <div class="test-card">
                    <h3>🎯 Core Web Vitals</h3>
                    <p>Testează metricile Core Web Vitals</p>
                    <button class="test-button" onclick="testCoreWebVitals()">Testează CWV</button>
                    <button class="test-button" onclick="testLighthouse()">Testează Lighthouse</button>
                    <div class="results" id="vitalsResults"></div>
                </div>
            </div>

            <div class="test-card">
                <h2>📊 Dashboard Performanță</h2>
                <div class="performance-chart" id="performanceChart">
                    <h3>Metrici de Performanță</h3>
                    <div class="metric">
                        <span>Timp încărcare inițial:</span>
                        <span class="metric-value" id="loadTime">-</span>
                    </div>
                    <div class="metric">
                        <span>Memorie folosită:</span>
                        <span class="metric-value" id="memoryUsed">-</span>
                    </div>
                    <div class="metric">
                        <span>Dimensiune bundle:</span>
                        <span class="metric-value" id="bundleSize">-</span>
                    </div>
                    <div class="metric">
                        <span>Număr de request-uri:</span>
                        <span class="metric-value" id="requestCount">-</span>
                    </div>
                    <div class="metric">
                        <span>FPS mediu:</span>
                        <span class="metric-value" id="fps">-</span>
                    </div>
                </div>
            </div>

            <div class="test-card">
                <h2>🌐 Aplicația OrderFlow</h2>
                <p>Monitorizează performanța în timp real:</p>
                <iframe src="http://localhost:4173" class="app-frame" id="appFrame"></iframe>
            </div>

            <div class="test-card">
                <h2>📊 Raport Performanță</h2>
                <button class="test-button" onclick="generatePerformanceReport()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                    Generează Raport
                </button>
                <div class="results" id="performanceReport"></div>
            </div>
        </div>
    </div>

    <script>
        let performanceResults = {
            loadTimes: {},
            memory: {},
            bundle: {},
            vitals: {},
            realTime: {}
        };

        // Monitorizează performanța în timp real
        let performanceMonitor = null;
        let fpsCounter = 0;
        let lastTime = performance.now();

        function startPerformanceMonitoring() {
            if (performanceMonitor) return;
            
            performanceMonitor = setInterval(() => {
                updatePerformanceMetrics();
            }, 1000);
        }

        function stopPerformanceMonitoring() {
            if (performanceMonitor) {
                clearInterval(performanceMonitor);
                performanceMonitor = null;
            }
        }

        function updatePerformanceMetrics() {
            // Actualizează FPS
            const currentTime = performance.now();
            const deltaTime = currentTime - lastTime;
            const fps = Math.round(1000 / deltaTime);
            lastTime = currentTime;
            
            document.getElementById('fps').textContent = fps + ' FPS';
            document.getElementById('fps').className = 'metric-value ' + (fps >= 30 ? 'metric-good' : fps >= 15 ? 'metric-warning' : 'metric-bad');
            
            // Actualizează memoria
            if (performance.memory) {
                const usedMemory = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                document.getElementById('memoryUsed').textContent = usedMemory + ' MB';
                document.getElementById('memoryUsed').className = 'metric-value ' + (usedMemory < 50 ? 'metric-good' : usedMemory < 100 ? 'metric-warning' : 'metric-bad');
            }
        }

        function testLoadTimes() {
            const results = document.getElementById('loadResults');
            let result = '⏱️ Testare Timpuri de Încărcare:\n';
            
            try {
                if (window.performance) {
                    const timing = window.performance.timing;
                    const navigation = window.performance.navigation;
                    
                    // Calculează timpii
                    const loadTime = timing.loadEventEnd - timing.navigationStart;
                    const domContentLoaded = timing.domContentLoadedEventEnd - timing.navigationStart;
                    const firstPaint = timing.responseEnd - timing.requestStart;
                    
                    result += `⏱️ Timp încărcare total: ${loadTime}ms\n`;
                    result += `⏱️ DOM Content Loaded: ${domContentLoaded}ms\n`;
                    result += `⏱️ First Paint: ${firstPaint}ms\n`;
                    
                    // Evaluează performanța
                    if (loadTime < 3000) {
                        result += '✅ Performanță excelentă (< 3s)\n';
                    } else if (loadTime < 5000) {
                        result += '⚠️ Performanță bună (3-5s)\n';
                    } else {
                        result += '❌ Performanță slabă (> 5s)\n';
                    }
                    
                    performanceResults.loadTimes.total = loadTime;
                    performanceResults.loadTimes.domContentLoaded = domContentLoaded;
                    performanceResults.loadTimes.firstPaint = firstPaint;
                    
                    // Actualizează dashboard-ul
                    document.getElementById('loadTime').textContent = loadTime + 'ms';
                    document.getElementById('loadTime').className = 'metric-value ' + (loadTime < 3000 ? 'metric-good' : loadTime < 5000 ? 'metric-warning' : 'metric-bad');
                    
                } else {
                    result += '❌ Performance API nu este suportat\n';
                }
                
            } catch (error) {
                result += `❌ Eroare la testarea timpilor: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testNetworkPerformance() {
            const results = document.getElementById('loadResults');
            let result = results.innerHTML + '\n\n🌐 Testare Performanță Rețea:\n';
            
            try {
                const iframe = document.getElementById('appFrame');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Numără resursele încărcate
                const scripts = iframeDoc.querySelectorAll('script[src]');
                const stylesheets = iframeDoc.querySelectorAll('link[rel="stylesheet"]');
                const images = iframeDoc.querySelectorAll('img[src]');
                
                result += `📦 Scripturi: ${scripts.length}\n`;
                result += `🎨 Stylesheets: ${stylesheets.length}\n`;
                result += `🖼️ Imagini: ${images.length}\n`;
                
                const totalResources = scripts.length + stylesheets.length + images.length;
                result += `📊 Total resurse: ${totalResources}\n`;
                
                // Actualizează dashboard-ul
                document.getElementById('requestCount').textContent = totalResources;
                document.getElementById('requestCount').className = 'metric-value ' + (totalResources < 20 ? 'metric-good' : totalResources < 50 ? 'metric-warning' : 'metric-bad');
                
                performanceResults.loadTimes.resources = totalResources;
                
            } catch (error) {
                result += `❌ Eroare la testarea rețelei: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testMemoryUsage() {
            const results = document.getElementById('memoryResults');
            let result = '💾 Testare Utilizare Memorie:\n';
            
            try {
                if (performance.memory) {
                    const memory = performance.memory;
                    const used = Math.round(memory.usedJSHeapSize / 1024 / 1024);
                    const total = Math.round(memory.totalJSHeapSize / 1024 / 1024);
                    const limit = Math.round(memory.jsHeapSizeLimit / 1024 / 1024);
                    
                    result += `💾 Memorie folosită: ${used} MB\n`;
                    result += `💾 Memorie totală: ${total} MB\n`;
                    result += `💾 Limita memorie: ${limit} MB\n`;
                    result += `📊 Procent folosit: ${Math.round((used / limit) * 100)}%\n`;
                    
                    // Evaluează utilizarea memoriei
                    const usagePercent = (used / limit) * 100;
                    if (usagePercent < 50) {
                        result += '✅ Utilizare memorie bună (< 50%)\n';
                    } else if (usagePercent < 80) {
                        result += '⚠️ Utilizare memorie moderată (50-80%)\n';
                    } else {
                        result += '❌ Utilizare memorie mare (> 80%)\n';
                    }
                    
                    performanceResults.memory.used = used;
                    performanceResults.memory.total = total;
                    performanceResults.memory.limit = limit;
                    performanceResults.memory.usagePercent = usagePercent;
                    
                } else {
                    result += '❌ Memory API nu este suportat\n';
                }
                
            } catch (error) {
                result += `❌ Eroare la testarea memoriei: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testCPUUsage() {
            const results = document.getElementById('memoryResults');
            let result = results.innerHTML + '\n\n🖥️ Testare Utilizare CPU:\n';
            
            try {
                // Testează performanța prin măsurarea timpului de execuție
                const startTime = performance.now();
                
                // Execută o operațiune intensivă
                let sum = 0;
                for (let i = 0; i < 1000000; i++) {
                    sum += Math.random();
                }
                
                const endTime = performance.now();
                const executionTime = endTime - startTime;
                
                result += `⏱️ Timp execuție test: ${executionTime.toFixed(2)}ms\n`;
                
                if (executionTime < 10) {
                    result += '✅ CPU performant (< 10ms)\n';
                } else if (executionTime < 50) {
                    result += '⚠️ CPU moderat (10-50ms)\n';
                } else {
                    result += '❌ CPU lent (> 50ms)\n';
                }
                
                performanceResults.memory.cpuTest = executionTime;
                
            } catch (error) {
                result += `❌ Eroare la testarea CPU: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testBundleSizes() {
            const results = document.getElementById('bundleResults');
            let result = '📦 Testare Dimensiuni Bundle:\n';
            
            try {
                const iframe = document.getElementById('appFrame');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Analizează scripturile
                const scripts = iframeDoc.querySelectorAll('script[src]');
                let totalScriptSize = 0;
                let scriptCount = 0;
                
                scripts.forEach(script => {
                    if (script.src.includes('assets/')) {
                        scriptCount++;
                        // Estimează dimensiunea (nu putem accesa real size din cauza CORS)
                        totalScriptSize += 100; // Estimare conservatoare
                    }
                });
                
                result += `📦 Scripturi bundle: ${scriptCount}\n`;
                result += `📊 Dimensiune estimată: ${totalScriptSize} KB\n`;
                
                // Analizează CSS-ul
                const stylesheets = iframeDoc.querySelectorAll('link[rel="stylesheet"]');
                let cssCount = 0;
                
                stylesheets.forEach(link => {
                    if (link.href.includes('assets/')) {
                        cssCount++;
                    }
                });
                
                result += `🎨 CSS bundle: ${cssCount}\n`;
                
                const totalBundleSize = totalScriptSize + (cssCount * 20); // Estimare CSS
                result += `📊 Dimensiune totală estimată: ${totalBundleSize} KB\n`;
                
                // Evaluează dimensiunea bundle-ului
                if (totalBundleSize < 500) {
                    result += '✅ Bundle mic (< 500 KB)\n';
                } else if (totalBundleSize < 1000) {
                    result += '⚠️ Bundle moderat (500 KB - 1 MB)\n';
                } else {
                    result += '❌ Bundle mare (> 1 MB)\n';
                }
                
                performanceResults.bundle.scripts = scriptCount;
                performanceResults.bundle.css = cssCount;
                performanceResults.bundle.totalSize = totalBundleSize;
                
                // Actualizează dashboard-ul
                document.getElementById('bundleSize').textContent = totalBundleSize + ' KB';
                document.getElementById('bundleSize').className = 'metric-value ' + (totalBundleSize < 500 ? 'metric-good' : totalBundleSize < 1000 ? 'metric-warning' : 'metric-bad');
                
            } catch (error) {
                result += `❌ Eroare la testarea bundle-ului: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testAssetOptimization() {
            const results = document.getElementById('bundleResults');
            let result = results.innerHTML + '\n\n🎯 Testare Optimizare Assets:\n';
            
            try {
                const iframe = document.getElementById('appFrame');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Testează comprimarea
                const scripts = iframeDoc.querySelectorAll('script[src]');
                let compressedScripts = 0;
                
                scripts.forEach(script => {
                    if (script.src.includes('.min.') || script.src.includes('prod')) {
                        compressedScripts++;
                    }
                });
                
                result += `📦 Scripturi comprimate: ${compressedScripts}/${scripts.length}\n`;
                
                // Testează lazy loading
                const images = iframeDoc.querySelectorAll('img');
                let lazyImages = 0;
                
                images.forEach(img => {
                    if (img.loading === 'lazy' || img.hasAttribute('data-src')) {
                        lazyImages++;
                    }
                });
                
                result += `🖼️ Imagini lazy loading: ${lazyImages}/${images.length}\n`;
                
                // Testează cache-ul
                const cacheableElements = iframeDoc.querySelectorAll('[class*="cache"], [data-cache]');
                result += `💾 Elemente cache-abile: ${cacheableElements.length}\n`;
                
                performanceResults.bundle.compressedScripts = compressedScripts;
                performanceResults.bundle.lazyImages = lazyImages;
                performanceResults.bundle.cacheableElements = cacheableElements.length;
                
            } catch (error) {
                result += `❌ Eroare la testarea optimizării: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testCoreWebVitals() {
            const results = document.getElementById('vitalsResults');
            let result = '🎯 Testare Core Web Vitals:\n';
            
            try {
                // Testează LCP (Largest Contentful Paint)
                if ('PerformanceObserver' in window) {
                    const lcpObserver = new PerformanceObserver((list) => {
                        const entries = list.getEntries();
                        const lastEntry = entries[entries.length - 1];
                        const lcp = lastEntry.startTime;
                        
                        result += `🎯 LCP: ${lcp.toFixed(2)}ms\n`;
                        
                        if (lcp < 2500) {
                            result += '✅ LCP excelent (< 2.5s)\n';
                        } else if (lcp < 4000) {
                            result += '⚠️ LCP bun (2.5-4s)\n';
                        } else {
                            result += '❌ LCP slab (> 4s)\n';
                        }
                        
                        performanceResults.vitals.lcp = lcp;
                    });
                    
                    lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
                }
                
                // Testează FID (First Input Delay)
                if ('PerformanceObserver' in window) {
                    const fidObserver = new PerformanceObserver((list) => {
                        const entries = list.getEntries();
                        entries.forEach(entry => {
                            const fid = entry.processingStart - entry.startTime;
                            
                            result += `🎯 FID: ${fid.toFixed(2)}ms\n`;
                            
                            if (fid < 100) {
                                result += '✅ FID excelent (< 100ms)\n';
                            } else if (fid < 300) {
                                result += '⚠️ FID bun (100-300ms)\n';
                            } else {
                                result += '❌ FID slab (> 300ms)\n';
                            }
                            
                            performanceResults.vitals.fid = fid;
                        });
                    });
                    
                    fidObserver.observe({ entryTypes: ['first-input'] });
                }
                
                // Testează CLS (Cumulative Layout Shift)
                if ('PerformanceObserver' in window) {
                    let clsValue = 0;
                    const clsObserver = new PerformanceObserver((list) => {
                        for (const entry of list.getEntries()) {
                            if (!entry.hadRecentInput) {
                                clsValue += entry.value;
                            }
                        }
                        
                        result += `🎯 CLS: ${clsValue.toFixed(4)}\n`;
                        
                        if (clsValue < 0.1) {
                            result += '✅ CLS excelent (< 0.1)\n';
                        } else if (clsValue < 0.25) {
                            result += '⚠️ CLS bun (0.1-0.25)\n';
                        } else {
                            result += '❌ CLS slab (> 0.25)\n';
                        }
                        
                        performanceResults.vitals.cls = clsValue;
                    });
                    
                    clsObserver.observe({ entryTypes: ['layout-shift'] });
                }
                
            } catch (error) {
                result += `❌ Eroare la testarea Core Web Vitals: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function testLighthouse() {
            const results = document.getElementById('vitalsResults');
            let result = results.innerHTML + '\n\n🏠 Testare Lighthouse:\n';
            
            try {
                // Simulează un test Lighthouse simplu
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                const memoryUsage = performance.memory ? performance.memory.usedJSHeapSize / 1024 / 1024 : 0;
                
                let score = 100;
                
                // Deduce puncte pe baza performanței
                if (loadTime > 3000) score -= 20;
                if (loadTime > 5000) score -= 30;
                if (memoryUsage > 100) score -= 15;
                if (memoryUsage > 200) score -= 25;
                
                result += `🏠 Scor Lighthouse estimat: ${score}/100\n`;
                
                if (score >= 90) {
                    result += '✅ Performanță excelentă\n';
                } else if (score >= 70) {
                    result += '⚠️ Performanță bună\n';
                } else {
                    result += '❌ Performanță slabă\n';
                }
                
                performanceResults.vitals.lighthouseScore = score;
                
            } catch (error) {
                result += `❌ Eroare la testarea Lighthouse: ${error.message}\n`;
            }
            
            results.innerHTML = result;
        }

        function generatePerformanceReport() {
            const results = document.getElementById('performanceReport');
            let report = '📊 RAPORT PERFORMANȚĂ - ORDERFLOW PWA\n';
            report += '='.repeat(50) + '\n\n';
            
            report += `📅 Data: ${new Date().toLocaleString('ro-RO')}\n`;
            report += `🖥️ Browser: ${navigator.userAgent}\n`;
            report += `📱 Rezoluție: ${window.innerWidth}x${window.innerHeight}\n\n`;
            
            report += '📊 REZULTATE PERFORMANȚĂ:\n';
            report += '-'.repeat(30) + '\n';
            
            // Load Times
            report += '\n⏱️ TIMPURI ÎNCĂRCARE:\n';
            report += `Total: ${performanceResults.loadTimes.total || 'N/A'}ms\n`;
            report += `DOM Content Loaded: ${performanceResults.loadTimes.domContentLoaded || 'N/A'}ms\n`;
            report += `First Paint: ${performanceResults.loadTimes.firstPaint || 'N/A'}ms\n`;
            report += `Resurse: ${performanceResults.loadTimes.resources || 'N/A'}\n`;
            
            // Memory
            report += '\n💾 MEMORIE:\n';
            report += `Folosită: ${performanceResults.memory.used || 'N/A'} MB\n`;
            report += `Total: ${performanceResults.memory.total || 'N/A'} MB\n`;
            report += `Limită: ${performanceResults.memory.limit || 'N/A'} MB\n`;
            report += `Procent: ${performanceResults.memory.usagePercent ? performanceResults.memory.usagePercent.toFixed(1) + '%' : 'N/A'}\n`;
            
            // Bundle
            report += '\n📦 BUNDLE:\n';
            report += `Scripturi: ${performanceResults.bundle.scripts || 'N/A'}\n`;
            report += `CSS: ${performanceResults.bundle.css || 'N/A'}\n`;
            report += `Dimensiune totală: ${performanceResults.bundle.totalSize || 'N/A'} KB\n`;
            report += `Scripturi comprimate: ${performanceResults.bundle.compressedScripts || 'N/A'}\n`;
            
            // Vitals
            report += '\n🎯 CORE WEB VITALS:\n';
            report += `LCP: ${performanceResults.vitals.lcp ? performanceResults.vitals.lcp.toFixed(2) + 'ms' : 'N/A'}\n`;
            report += `FID: ${performanceResults.vitals.fid ? performanceResults.vitals.fid.toFixed(2) + 'ms' : 'N/A'}\n`;
            report += `CLS: ${performanceResults.vitals.cls ? performanceResults.vitals.cls.toFixed(4) : 'N/A'}\n`;
            report += `Lighthouse Score: ${performanceResults.vitals.lighthouseScore || 'N/A'}/100\n`;
            
            report += '\n🎯 RECOMANDĂRI:\n';
            report += '-'.repeat(20) + '\n';
            report += '1. Optimizează timpii de încărcare (< 3s)\n';
            report += '2. Reduceți dimensiunea bundle-ului\n';
            report += '3. Implementați lazy loading pentru imagini\n';
            report += '4. Optimizați utilizarea memoriei\n';
            report += '5. Testați pe dispozitive cu performanță redusă\n';
            
            results.innerHTML = report;
        }

        // Pornește monitorizarea performanței la încărcarea paginii
        window.addEventListener('load', function() {
            startPerformanceMonitoring();
            testLoadTimes();
            testMemoryUsage();
            testBundleSizes();
        });

        // Oprește monitorizarea când se închide pagina
        window.addEventListener('beforeunload', function() {
            stopPerformanceMonitoring();
        });
    </script>
</body>
</html>
